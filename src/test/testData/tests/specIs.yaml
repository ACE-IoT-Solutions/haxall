#
# Tests for checking nominal typing with two specs
#

##########################################################################
## Sys
##########################################################################

---
name: "obj"
verifySpecIs:
  with: "sys::Obj"
  trues:
    - "sys::Obj"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::Dict"
---
name: "none"
verifySpecIs:
  with: "sys::None"
  trues:
    - "sys::Obj"
    - "sys::None"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::Dict"
---
name: "scalar"
verifySpecIs:
  with: "sys::Scalar"
  trues:
    - "sys::Obj"
    - "sys::Scalar"
  falses:
    - "sys::None"
    - "sys::Str"
    - "sys::Dict"
---
name: "str"
verifySpecIs:
  with: "sys::Str"
  trues:
    - "sys::Obj"
    - "sys::Scalar"
    - "sys::Str"
  falses:
    - "sys::None"
    - "sys::Number"
    - "sys::Dict"
---
name: "number"
verifySpecIs:
  with: "sys::Number"
  trues:
    - "sys::Obj"
    - "sys::Scalar"
    - "sys::Number"
  falses:
    - "sys::None"
    - "sys::Str"
    - "sys::Int"
    - "sys::Dict"
---
name: "int"
verifySpecIs:
  with: "sys::Int"
  trues:
    - "sys::Obj"
    - "sys::Scalar"
    - "sys::Number"
    - "sys::Int"
  falses:
    - "sys::None"
    - "sys::Str"
    - "sys::Duration"
    - "sys::Dict"
---
name: "seq"
verifySpecIs:
  with: "sys::Seq"
  trues:
    - "sys::Obj"
    - "sys::Seq"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::Dict"
---
name: "list"
verifySpecIs:
  with: "sys::List"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::List"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::Dict"
---
name: "dict"
verifySpecIs:
  with: "sys::Dict"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "sys::Spec"
---
name: "spec"
verifySpecIs:
  with: "sys::Spec"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "sys::Spec"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
---

##########################################################################
## Maybe
##########################################################################

---
name: "maybeStr"
compileLib: |
  Foo: Str?
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Scalar"
    - "sys::Str"
    - "sys::None"
  falses:
    - "sys::Number"
    - "sys::Seq"
    - "sys::Dict"
---
name: "maybeList"
compileLib: |
  Foo: List? <of:Str>
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::List"
    - "sys::None"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::Dict"
---
name: "maybeCustom"
compileLib: |
  Foo: Dict
  Bar: Foo
  Baz: Bar?
verifySpecIs:
  with: "test::Baz"
  trues:
    - "sys::Obj"
    - "sys::Dict"
    - "test::Foo"
    - "test::Bar"
    - "test::Baz"
    - "sys::None"
  falses:
    - "sys::Scalar"
    - "sys::Str"
---
name: "maybeOverride"
compileLib: |
  Foo: Dict
  Bar: Foo?
  Baz: Bar
verifySpecIs:
  with: "test::Baz"
  trues:
    - "sys::Obj"
    - "sys::Dict"
    - "test::Foo"
    - "test::Bar"
    - "test::Baz"
  falses:
    - "sys::None"
    - "sys::Scalar"
    - "sys::Str"
---


##########################################################################
## And
##########################################################################

---
name: "and"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo & Bar
  Qux: Foo
verifySpecIs:
  with: "test::Baz"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "sys::And"
    - "test::Foo"
    - "test::Bar"
    - "test::Baz"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "sys::Or"
    - "test::Qux"
---
name: "andFlip"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo & Bar
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "test::Foo"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "test::Bar"
    - "test::Baz"
---
name: "andNest"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo & Bar
  Qux: Baz
verifySpecIs:
  with: "test::Qux"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "sys::And"
    - "test::Foo"
    - "test::Bar"
    - "test::Baz"
    - "test::Qux"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "sys::Or"
---
name: "andNestDeep"
compileLib: |
  A: Dict
  B: Dict
  C: Dict
  D: Dict
  E: Dict
  AB: A & B & C
  CD: C & D
  AE: A & E
  AE2: AE
  X: AB & CD & AE2
  Y: AB & CD & AE2
verifySpecIs:
  with: "test::X"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "sys::And"
    - "test::A"
    - "test::B"
    - "test::C"
    - "test::D"
    - "test::E"
    - "test::AB"
    - "test::CD"
    - "test::AE"
    - "test::AE2"
    - "test::X"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "sys::Or"
    - "test::Y"
---

##########################################################################
## Or
##########################################################################

---
name: "or"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo | Bar
verifySpecIs:
  with: "test::Baz"
  trues:
    - "sys::Obj"
    - "sys::Or"
    - "sys::Dict"  # common base
    - "test::Baz"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "sys::And"
    - "test::Foo"
    - "test::Bar"
---
name: "orCommon"
compileLib: |
  A: Dict
  B: Dict
  C: Dict
  CA: C & A
  CB: C & B
  D:  CA
  E:  CB
  Foo: D | E
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Or"
    - "sys::Seq"   # common base
    - "sys::Dict"  # common base
    - "test::C"    # common base
    - "test::Foo"
  falses:
    - "sys::Scalar"
    - "sys::Str"
    - "sys::List"
    - "test::A"
    - "test::B"
    - "test::D"
    - "test::E"
---
name: "orFlip"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo | Bar
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "test::Foo"
    - "test::Baz"
  falses:
    - "sys::Str"
    - "sys::List"
    - "test::Bar"
---
name: "orFlipInherit"
compileLib: |
  Foo: Dict
  Bar: Dict
  Baz: Foo | Bar
  Qux: Foo
verifySpecIs:
  with: "test::Qux"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "test::Foo"
    - "test::Baz"
    - "test::Qux"
  falses:
    - "sys::Str"
    - "sys::List"
    - "test::Bar"
---
name: "orFlipBase"
compileLib: |
  Foo: Dict
  Bar: Dict
  Qux: Foo
  Baz: Qux | Bar
verifySpecIs:
  with: "test::Foo"
  trues:
    - "sys::Obj"
    - "sys::Seq"
    - "sys::Dict"
    - "test::Foo"
  falses:
    - "sys::Str"
    - "sys::List"
    - "test::Baz"
    - "test::Qux"
---

